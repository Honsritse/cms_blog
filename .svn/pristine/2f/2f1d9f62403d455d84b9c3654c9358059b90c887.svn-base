package com.briup.service.impl;

import java.util.List;

import javax.annotation.Resource;

import org.springframework.stereotype.Service;

import com.briup.bean.Category;
import com.briup.bean.CategoryExample;
import com.briup.bean.extend.CategoryExtend;
import com.briup.dao.extend.CategoryExtendMapper;
import com.briup.exception.CustomException;
import com.briup.service.ICategoryService;

@Service
public class CategoryServiceImpl implements ICategoryService {

	@Resource
	private CategoryExtendMapper categoryEMapper;

	@Override
	public void deleteAll() {
		categoryEMapper.deleteByExample(new CategoryExample());
	}

	@Override
	public void deleteById(long id) {
		categoryEMapper.deleteByPrimaryKey(id);
	}

	@Override
	public void saveOrUpdate(Category category) {

		if (categoryEMapper.selectByPrimaryKey(category.getId()) != null) {
			categoryEMapper.updateByPrimaryKey(category);
		} else {
			categoryEMapper.insert(category);
		}

	}

	@Override
	public Category findById(long id) throws CustomException {
		Category category = categoryEMapper.selectByPrimaryKey(id);
		if (category != null) {
			return category;
		}
		throw new CustomException("ID不存在");
	}

	@Override
	public CategoryExtend findByIdCascade(long id) {
		return categoryEMapper.findByIdCascade(id);
	}

	@Override
	public List<Category> sortByNo() {
		CategoryExample categoryExample = new CategoryExample();
		categoryExample.setOrderByClause("no asc");
		return categoryEMapper.selectByExample(categoryExample);
	}

	@Override
	public List<Category> sortByName() {
		CategoryExample categoryExample = new CategoryExample();
		categoryExample.setOrderByClause("name asc");
		return categoryEMapper.selectByExample(categoryExample);
	}

}
